<!doctype html>
<html>
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/reveal.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/css/theme/black.min.css">
  <style>
    body {
      display: flex;
      margin: 0;
      font-family: Arial, sans-serif;
    }
    #sidebar {
      width: 250px;
      background: #f4f4f4;
      padding: 10px;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      position: fixed;
      height: 100%;
      overflow-y: auto;
      transition: transform 0.3s ease;
      display: flex;
      flex-direction: column;
      z-index: 100; /* Ensure it's above other content */
    }
    #sidebar.collapsed {
      transform: translateX(-90px); /* Adjust to show a piece of the sidebar */
      width: 90px; /* Adjust to fit the piece of the sidebar you want to show */
    }
    #toggle-btn {
      position: absolute;
      top: 10px;
      left: 100%; /* Position the button outside the sidebar */
      width: 60px; /* Make the button larger */
      height: 60px; /* Make the button larger */
      background: #007BFF;
      color: white;
      border: none;
      border-radius: 50%; /* Make the button circular */
      cursor: pointer;
      z-index: 101; /* Ensure the button is above the sidebar */
      transform: translateX(-100%) rotate(90deg); /* Rotate the button to look like an arrow */
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px; /* Increase font size for larger arrow */
    }
    #toggle-btn:hover {
      background: #0056b3;
    }
    #sidebar h2 {
      font-size: 1.5em;
      margin-top: 0;
    }
    #sidebar ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    #sidebar li {
      margin-bottom: 10px;
    }
    #sidebar a {
      text-decoration: none;
      color: #007BFF;
    }
    #sidebar a:hover {
      text-decoration: underline;
    }
    #reveal {
      margin-left: 250px; /* Ensure the slides don't overlap the sidebar */
      width: calc(100% - 250px);
      height: 100vh;
      transition: margin-left 0.3s ease;
    }
    #reveal.shifted {
      margin-left: 90px; /* Adjust to the collapsed width of the sidebar */
      width: calc(100% - 90px);
    }
  </style>
</head>
<body>
  <div id="sidebar">
    <button id="toggle-btn">→</button>
    <h2>Table of Contents</h2>
    <ul id="toc"></ul>
  </div>

  <div class="reveal" id="reveal">
    <div class="slides">
      <section>
        <h2>Introduction</h2>
        <p>Welcome to the presentation.</p>
      </section>
      <section>
        <h2>Content</h2>
        <p>Here is the main content.</p>
      </section>
      <section>
        <h2>Conclusion</h2>
        <p>Wrapping up the presentation.</p>
      </section>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.6.0/js/reveal.min.js"></script>
  <script>
    Reveal.initialize();

    document.addEventListener('DOMContentLoaded', function() {
      const tocContainer = document.getElementById('toc');
      const slides = document.querySelectorAll('section');

      slides.forEach((slide, index) => {
        const title = slide.querySelector('h2, h3, h4');
        if (title) {
          const anchor = document.createElement('a');
          anchor.href = `#/${index}`;
          anchor.textContent = title.textContent;
          const listItem = document.createElement('li');
          listItem.appendChild(anchor);
          tocContainer.appendChild(listItem);
        }
      });

      const toggleBtn = document.getElementById('toggle-btn');
      const sidebar = document.getElementById('sidebar');
      const reveal = document.getElementById('reveal');

      toggleBtn.addEventListener('click', function() {
        sidebar.classList.toggle('collapsed');
        reveal.classList.toggle('shifted');
        // Change arrow direction based on sidebar state
        if (sidebar.classList.contains('collapsed')) {
          toggleBtn.textContent = '→'; // Right arrow
        } else {
          toggleBtn.textContent = '←'; // Left arrow
        }
      });
    });
  </script>
</body>
</html>
